# Модель прецедентів

## Загальна схема

```plantuml
@startuml

actor "Відвідувач" as Visitor
actor "Авторизований користувач" as User
actor "Адміністратор" as Admin

usecase "<b>Visitor.SingUp</b>\nРеєстрація" as Visitor.SingUp

usecase "<b>User.Help</b>\nЗвернення до\nпідтримки" as User.Help
usecase "<b>User_profile_manage</b>" as User_profile_manage
usecase "<b>User_search_manage</b>" as User_search_manage
usecase "<b>User_data_manage</b>" as User_data_manage

usecase "<b>User_acc_manage</b>\nКерування обліковими\n записами користувачів" as ManageAccount 
usecase "<b>User_source_manage</b>\nКерування джерелами інформації" as ManageSource

Visitor -d-> Visitor.SingUp
Visitor.SingUp -d-> User
Admin -u-|> User

User -u-> User.Help
User -u-> User_profile_manage
User -l-> User_search_manage
User -r-> User_data_manage

Admin -l-> ManageAccount
Admin -r-> ManageSource

@enduml
```

## Схема використання

### Відвідувач

```plantuml
@startuml
actor Guest
actor User

usecase "<b>Visitor.Registration\nРеєстрація" as Registration

Guest -> Registration
Registration -> User

@enduml
```

### Користувач

```plantuml
@startuml

actor "Користувач" as User

usecase "<b>User_profile_manage</b>" as User_profile_manage
usecase "<b>User_search_manage</b>" as User_search_manage
usecase "<b>User_data_manage</b>" as User_data_manage

usecase "<b>User.Help</b>\nЗвернення до\nпідтримки" as User.Help
usecase "<b>User.Login</b>\nАвторизація" as User.Login
usecase "<b>User.Password_Recovery</b>\nВідновлення паролю\nкористувачем" as User.Password_Recovery
usecase "<b>User.DeleteRequest</b>\nЗапит на видалення\nоблікового запису" as User.DeleteRequest
usecase "<b>User.Search_req</b>\nЗапит на пошук" as User.Search_req
usecase "<b>User.Data_filter</b>\nФільтрація даних" as User.Data_filter
usecase "<b>User.Loading_Data_In_System</b>\nЗавантаження даних у систему" as User.Loading_Data_In_System
usecase "<b>User.Loading_Data_From_System</b>\nЗавантаження даних з системи" as User.Loading_Data_From_System

User --> User.Help
User --> User_profile_manage
User --> User_search_manage
User --> User_data_manage

User_profile_manage <-[dashed]- User.Login : <<extend>>
User.Login <-[dashed]- User.Password_Recovery : <<extend>>
User_profile_manage <-[dashed]- User.DeleteRequest : <<extend>>
User_search_manage <-[dashed]- User.Search_req : <<extend>>
User.Search_req <-[dashed]- User.Data_filter : <<extend>>
User_data_manage <-[dashed]- User.Loading_Data_In_System : <<extend>>
User_data_manage <-[dashed]- User.Loading_Data_From_System : <<extend>>

@enduml
```

### Адміністратор

```plantuml
@startuml

actor "Адміністратор" as Admin

usecase "<b>User_acc_manage</b>\nКерування обліковими\n записами користувачів" as ManageAccount 
usecase "<b>User_source_manage</b>\nКерування джерелами інформації" as ManageSource 

usecase "<b>Administrator.Add_New_Source</b>\nДодавання нового джерела" as Administrator.Add_New_Source
usecase "<b>Administrator.Delete_Source</b>\nВидалення джерела" as Administrator.Delete_Source
usecase "<b>Administrator.Request_History</b>\nІсторія запитів користувачів" as Administrator.Request_History
usecase "<b>Admin.ProfileEdit</b>\nРедагування\nоблікового запису" as Admin.ProfileEdit
usecase "<b>Admin.ProfileDelete</b>\nВидалення\nоблікового запису" as Admin.ProfileDelete

Admin --> ManageAccount
Administrator.Request_History .u.> ManageAccount: <<extends>>
Admin.ProfileEdit .u.> ManageAccount: <<extends>>
Admin.ProfileDelete .u.> ManageAccount: <<extends>>

Admin --> ManageSource
Administrator.Add_New_Source .u.> ManageSource: <<extends>>
Administrator.Delete_Source .u.> ManageSource: <<extends>>

@enduml
```

## Сценарії використання

### Відвідувач

#### Реєстрація

| ***ID***:         | Visitor.SingUp                                  |
|-------------------|-------------------------------------------------|
| ***НАЗВА***:      | Реєстрація                                      |
| ***УЧАСНИКИ***:   | Відвідувач, Система                             |
| ***ПЕРЕДУМОВИ***: | В користувача немає облікового запису у системі |
| ***РЕЗУЛЬТАТ***:  | Обліковий запис нового користувача              |
| ***ВИКЛЮЧНІ СИТУАЦІЇ***: | EX.Visitor.SingUp.Login Зайнятий логін <br /> EX.Visitor.SingUp.WrongEmail Невірна електронна пошта <br /> EX.Visitor.SingUp.SimplePass Пароль малої складності <br />EX.Visitor.SingUp.NotConfirm Користувач не підтвердив реєстрацію |
| ***ОСНОВНИЙ СЦЕНАРІЙ***: | 1. Користувач починає взаємодію; <br /> 2. Користувач натискає кнопку реєстрації нового облікового запису; <br /> 3. Система надає форму для заповнення <br /> 4. Користувач заповнює поля: логін, адреса електронної пошти, пароль <br /> 5. Користувач натискає кнопку підтвердження реєстрації <br />6. Система створює новий обліковий запис <br /> 7. Користувач закінчує взаємодію |

```plantuml
@startuml
|Відвідувач|
    start
    :Починає взаємодію;
    :Натискає кнопку реєстрації нового облікового запису;
|Система|
    :Надає форму для заповнення;
|Відвідувач|
    :Отримує форму для реєстрації і заповнює її;
    :Заповнює поля: логін, адреса електронної пошти, пароль;
    :Натискає кнопку підтвердження реєстрації;
        note left #FF736E
            EX.Visitor.SingUp.NotConfirm        
        end note

|Система|
    :Перевіряє дані з форми;
        note right #FF736E
            EX.Visitor.SingUp.Login
            EX.Visitor.SingUp.WrongEmail
            EX.Visitor.SingUp.SimplePass        
        end note

    :Створює новий обліковий запис;

|Відвідувач|
    :Закінчує взаємодію;
    stop;
@enduml
```

### Користувач

#### Авторизація

| ***ID***:         | User.Login                                                                     |
|-------------------|-----------------------------------------------------------------------------------|
| ***НАЗВА***:      | Авторизація                                                                       |
| ***УЧАСНИКИ***:   | Користувач, Система                                                               |
| ***ПЕРЕДУМОВИ***: | Користувач має обліковий запис у системі                                          |
| ***РЕЗУЛЬТАТ***:  | Успішна авторизація дозволяє користувачеві отримати доступ до функціоналу системи |
| ***ВИКЛЮЧНІ СИТУАЦІЇ***: | Невірний логін EX.User.Login.WrongLogin<br /> Невірний пароль EX.User.Login.WrongPass<br /> Блокування облікового запису EX.User.Login.AccBlocked<br />Обліковий запис не існує Ex.User.Login.AccDoesntExist<br /> Невірна електронна пошта EX.User.Login.WrongEmail |
| ***ОСНОВНИЙ СЦЕНАРІЙ***: | 1. Користувач починає взаємодію <br /> 2. Користувач натискає кнопку входу до облікового запису <br /> 3. Система надає форму для заповнення <br /> 4. Користувач заповнює поля: адреса електронної пошти або логін, пароль <br /> 5. Система підтверджує виконання <br /> 6. Користувач закінчує взаємодію                                                        |

```plantuml
@startuml
|Користувач|
    start
    :Починає взаємодію;
    :Натискає кнопку входу до облікового запису;
|Система|
    :Надає форму для заповнення;
|Користувач|
    :Отримує форму для авторизації;
    :Заповнює поля: логін або адреса електронної пошти, пароль;
    :Натискає кнопку підтвердження авторизації;
|Система|
    :Перевіряє дані з форми;
        note right #FF736E
            EX.User.Login.WrongLogin
            EX.User.Login.WrongEmail
            EX.User.Login.WrongPass 
            Ex.User.Login.AccBlocked
            Ex.User.Login.AccDoesntExist
        end note

    :Підтверджує виконання;

|Користувач|
    :Закінчує взаємодію;
    stop;
```

#### Звернення до підтримки

| ***ID***:                | User.Help                                                                               |
|--------------------------|-----------------------------------------------------------------------------------------|
| ***НАЗВА***:             | Звернення користувача до підтримки                                                      |
| ***УЧАСНИКИ***:          | Користувач, система                                                                     |
| ***ПЕРЕДУМОВИ***:        | Користувач потребує допомоги                                                            |
| ***РЕЗУЛЬТАТ***:         | Користувач отримує інформацію про роботу з системою                                     |
| ***ВИКЛЮЧНІ СИТУАЦІЇ***: | Система не змогла ідентифікувати запит - problem_not_defined; <br />Система не знає вирішення цієї проблеми користувача - problem_no_solution. |

```plantuml
@startuml
|Користувач|
    start
    :Натискає на кнопку звернення до системи;
|Система|
    :Надає користувачу форму для заповнення;
|Користувач|
    :Отримує доступ для заповнення форми;
    :Вписує текст свого питання;
    :Надсилає заповнену форму системі;
|Система|
    :Аналізує проблему користувача за ключовими словами;
        note right #FF736E
            problem_not_defined
            problem_no_solution
        end note

    :Надсилає користувачу необхідну довідку;
|Користувач|
    :Отримує довідку та закінчує взаємодію;
    stop;
@enduml
```

#### Відновлення паролю

| ***ID***:                | User.Password_Recovery                                                                               |
|--------------------------|------------------------------------------------------------------------------------------------------|
| ***НАЗВА***:             | Відновлення паролю користувачем                                                                      |
| ***УЧАСНИКИ***:          | Користувач, система                                                                                  |
| ***ПЕРЕДУМОВИ***:        | Користувач має обліковий запис у системі                                                             |
| ***РЕЗУЛЬТАТ***:         | Оновлений пароль облікового запису користувача                                                       |
| ***ВИКЛЮЧНІ СИТУАЦІЇ***: | Облікового запису не існує InvalidEmailForRecovery <br /> Помилка переходу на сторінку відновлення InvalidRecoveryLink <br /> Некоректний пароль InvalidPassForRecovery |

```plantuml
@startuml
|Користувач|
    start
    :Переходить на сторінку відновлення паролю;
|Система|
    :Надає форму запиту для відновлення паролю;
|Користувач|
    :Вводить електронну пошту;
        note left #FF736E
            InvalidEmailForRecovery
        end note
|Система|
    :Надсилає на вказану електронну пошту лист зі згенерованим посиланням;
|Користувач|
    :Переходить за посиланням, наданим системою у листі;
        note left #FF736E
            InvalidRecoveryLink
        end note
|Система|
    :Надає форму для відновлення паролю;
|Користувач|
    :Вводить новий пароль та надсилає;
|Система|
    :Оновлює пароль;
        note right #FF736E
            InvalidPassForRecovery
        end note
|Користувач|
    :Завершує взаємодію;
    stop
@enduml
```

#### Запит на видалення облікового запису

| ***ID***:                | User.DeleteRequest                                                           |
|--------------------------|------------------------------------------------------------------------------|
| ***НАЗВА***:             | Запит на видалення облікового запису                                         |
| ***УЧАСНИКИ***:          | Користувач, Система                                                          |
| ***ПЕРЕДУМОВИ***:        | Користувач увійшов в обліковий запис                                         |
| ***РЕЗУЛЬТАТ***:         | Успішне видалення облікового запису користувача                              |
| ***ВИКЛЮЧНІ СИТУАЦІЇ***: | Видалення не підтверджене користувачем DeleteRequest.NotConfirmed <br /> Введений пароль є неправильним DeleteRequest.WrongPass |

```plantuml
@startuml
|Користувач|
    start
    :Починає взаємодію;
    :Натискає кнопку видалення\nоблікового запису;
|Система|
    :Надає форму для заповнення;
|Користувач|
    :Отримує форму для видалення;
    :Заповнює поле: пароль;
    :Натискає кнопку підтвердження;
        note left #FF736E
            DeleteRequest.NotConfirmed
        end note
|Система|
    :Перевіряє дані з форми;
        note right #FF736E
            DeleteRequest.WrongPass
        end note

    :Видаляє обліковий запис;

|Користувач|
    :Закінчує взаємодію;
    stop;
```

#### Пошук

| ***ID***:                | User.Search_req                                                                                               |
|--------------------------|---------------------------------------------------------------------------------------------------------------|
| ***НАЗВА***:             | Запит на пошук                                                                                                |
| ***УЧАСНИКИ***:          | Користувач, система.                                                                                          |
| ***ПЕРЕДУМОВИ***:        | Користувач авторизований. <br /> Користувач вже знаходиться на домашній сторінці або сторінці пошуку системи. |
| ***РЕЗУЛЬТАТ***:         | Відображення результатів пошуку користувачеві.                                                                |
| ***ВИКЛЮЧНІ СИТУАЦІЇ***: | Невдала спроба пошуку через помилково введені дані - EX.User.Search_req.InvalidInput. <br /> Користувач не був авторизований - EX.User.SingUp.False.                   |

```plantuml
@startuml
|Користувач|
    start
    :Вводить ключові слова\nабо параметри пошуку;
    :Натискає на кнопку "Пошук";
|Система|
    :Обробляє запит користувача;
    :Відображає результати пошуку;
    :Вносить результати\nв історію пошуку;
        note right #FF736E
            EX.User.Search_req.InvalidInput
        end note
|Користувач|
    :Переглядає результати пошуку;
    :Взаємодіє з результатами;
    stop;
@enduml
```

#### Фільтрація

| ***ID***:                | User.Data_filter                                                                     |
|--------------------------|--------------------------------------------------------------------------------------|
| ***НАЗВА***:             | Фільтрація даних                                                                     |
| ***УЧАСНИКИ***:          | Користувач, система.                                                                 |
| ***ПЕРЕДУМОВИ***:        | Користувач вже виконав пошук та отримав результати. <br /> Користувач авторизований. |
| ***РЕЗУЛЬТАТ***:         | Відображення оновлених результатів пошуку з урахуванням обраних фільтрів.            |
| ***ВИКЛЮЧНІ СИТУАЦІЇ***: | Користувач не обрав жодного фільтру - EX.User.Data_filter.NoFilters.                 |

```plantuml
@startuml
|Користувач|
    start
    :Переглядає результати пошуку;
    :Активує функцію фільтрації;
|Система|
    :Відображає доступні параметри фільтрації;
|Користувач|
    :Обирає бажані критерії фільтрації;
|Система|
    :Відображає оновлені результати з\nврахуванням застосованих фільтрів;
        note right #FF736E
            EX.User.Data_filter.NoFilters
        end note
    
|Користувач|
    :Переглядає оновлені результати з\nврахуванням застосованих фільтрів;
    stop;
@enduml
```

#### Імпорт даних

| ***ID***:         | User.Loading_Data_In_System                               |
|-------------------|-----------------------------------------------------------|
| ***НАЗВА***:      | Завантаження даних у систему                              |
| ***УЧАСНИКИ***:   | Користувач, система                                       |
| ***ПЕРЕДУМОВИ***: | Авторизація користувача, наявність даних для завантаження |
| ***РЕЗУЛЬТАТ***:  | Дані успішно завантажені у систему                        |
| ***ВИКЛЮЧНІ СИТУАЦІЇ***: | Помилки під час завантаження - wrong_data_format <br /> Втрата з'єднання - wrong_connection <br /> Обмеження прав доступу - wrong_access_rights |

```plantuml
@startuml
|Користувач| 
    start
    :Переходить до розділу "Завантаження даних";
    :Натискає кнопку\n"Завантажити дані в систему";
        note left #FF736E
            wrong_access_rights
        end note
|Система|
    :Отримує запит на завантаження даних;
    :Відображає форму параметрів для завантаження;
|Користувач| 
    :Вибирає параметри та натискає кнопку "Завантажити";
|Система| 
    :Завантажує дані\nвідповідно до\nвказаних параметрів;
        note right #FF736E
            wrong_data_format
            wrong_connection
        end note
    :Генерує підтвердження про\nуспішне завантаження\nта відображає його користувачеві;
|Користувач| 
    :Отримує сповіщення про успішне\nзавантаження даних в систему;
    stop
@enduml
```

#### Експорт даних

| ***ID***:                | User.Loading_Data_From_System                                                            |
|--------------------------|------------------------------------------------------------------------------------------|
| ***НАЗВА***:             | Завантаження даних з системи                                                             |
| ***УЧАСНИКИ***:          | Користувач, система                                                                      |
| ***ПЕРЕДУМОВИ***:        | Авторизація користувача, доступність даних у системі                                     |
| ***РЕЗУЛЬТАТ***:         | Успішне завантаження даних                                                               |
| ***ВИКЛЮЧНІ СИТУАЦІЇ***: | Відсутність даних у системі - no_data; <br /> Помилки під час завантаження - wrong_connection; <br /> Відсутність електронної пошти - no_email; <br /> Неправильно введено електронну пошту - wrong_email; <br /> Обмеження прав доступу - wrong_access_rights. |

```plantuml
@startuml
|Користувач| 
    start
    :Переходить до розділу "Завантаження даних";
    :Натискає кнопку "Завантажити дані з системи";
        note left #FF736E
            wrong_access_rights
        end note
|Система|
    :Отримує запит на завантаження даних;
    :Відображає форму параметрів для завантаження;
|Користувач| 
    :Вибирає параметри та натискає кнопку "Завантажити";
|Система| 
    :Виконує пошук даних в базі даних\nзгідно з вказаними параметрами.;
        note right #FF736E
            no_data
        end note
    :Генерує підтвердження, про успішно знайдені дані;
    :Перевіряє наявність електронної адреси користувача;
        note right #FF736E
            no_email
        end note
    :Виконує підготовку до завантаження даних;
        note right #FF736E
            wrong_connection
        end note
    :Надсилає дані на пошту користувача;
        note right #FF736E
            wrong_email
        end note
|Користувач| 
    :Отримує сповіщення про успішне\nнадсилання даних на пошту;
    :Завантажує отримані дані з пошти;
        note left #FF736E
            wrong_connection
        end note
    stop
@enduml
```

### Адміністратор

#### Історія запитів користувачів

| ***ID***:                | Administrator.Request_History                                                              |
|--------------------------|--------------------------------------------------------------------------------------------|
| ***НАЗВА***:             | Історія запитів користувачів                                                               |
| ***УЧАСНИКИ***:          | Адміністратор, користувачі, система                                                        |
| ***ПЕРЕДУМОВИ***:        | Авторизація адміністратора, потреба зберігати та відстежувати історію запитів користувачів |
| ***РЕЗУЛЬТАТ***:         | Збереження та доступ до історії запитів для адміністратора                                 |
| ***ВИКЛЮЧНІ СИТУАЦІЇ***: | Втрата даних - wrong_search; <br /> Обмежений доступ до історії - wrong_access_rights.  |

```plantuml
@startuml
|Адміністратор| 
    start
    :Переходить до розділу "Історія запитів користувача";
    :Натискає кнопку "Обрати користувача";
    :Натискає кнопку "Переглянути історію запитів";
        note left #FF736E
            wrong_access_rights
        end note
|Система|
    :Шукає та формує історію запитів;
        note right #FF736E
            wrong_search
        end note
    :Відображає її у вигляді списку або таблиці;
    stop
@enduml
```

#### Додавання джерела

| ***ID***:                | Administrator.Add_New_Source                               |
|--------------------------|------------------------------------------------------------|
| ***НАЗВА***:             | Додавання нового джерела                                   |
| ***УЧАСНИКИ***:          | Адміністратор, система                                     |
| ***ПЕРЕДУМОВИ***:        | Авторизація адміністратора <br />Потреба в  новому джерелі |
| ***РЕЗУЛЬТАТ***:         | Створення нового джерела                                   |
| ***ВИКЛЮЧНІ СИТУАЦІЇ***: | Помилка аналізу <br />Брак пам'яті <br />Доступ заблокований<br /> Відмова адміністратора від збереження                                                                              |
| ***ОСНОВНИЙ СЦЕНАРІЙ***: | 1. Адміністратор обирає опцію "Додати нове джерело". <br /> 2. Система надає форму для заповнення<br />3. Адміністратор вводить необхідні дані у форму <br />4. Система успішно здійснює з'єднання та отримує доступ до медіа-контенту <br /> 5. Адміністратор зберігає налаштування.|

#### Видалення джерела

| ***ID***:                | Administrator.Delete_Source                                                                          |
|--------------------------|------------------------------------------------------------------------------------------------------|
| ***НАЗВА***:             | Видалення джерела                                                                                    |
| ***УЧАСНИКИ***:          | Адміністратор, система                                                                               |
| ***ПЕРЕДУМОВИ***:        | Авторизація адміністратора, потреба видалити джерело                                                 |
| ***РЕЗУЛЬТАТ***:         | Джерело видалене                                                                                     |
| ***ВИКЛЮЧНІ СИТУАЦІЇ***: | Обмежена кількість прав доступу <br />Відсутність джерела<br /> Відмова адміністратора від видалення |
| ***ОСНОВНИЙ СЦЕНАРІЙ***: | 1. Адміністратор обирає опцію "Видалити джерело". <br />2. Система надає список джерел. <br />3. Адміністратор знаходить в списку джерел потрібне джерело.<br />4. Адміністратор вибирає опцію "Видалити" поруч з вибраним джерелом.<br />5. Система створює запит на видалення облікового запису. <br />4. Адміністратор підтверджує рішення про видалення джерела.<br />5. Система видаляє обране джерело зі своїх налаштувань та бази даних.                                    |

#### Редагування облікового запису

| ***ID***:         | Admin.ProfileEdit                                                                          |
|-------------------|--------------------------------------------------------------------------------------------|
| ***НАЗВА***:      | Редагування облікового запису                                                              |
| ***УЧАСНИКИ***:   | Адміністратор, система                                                                     |
| ***ПЕРЕДУМОВИ***: | Адміністратор виконав авторизацію, адміністратор має права доступу до редагування профілю. |
| ***РЕЗУЛЬТАТ***:  | Змінені дані облікового запису користувача                                                 |
| ***ВИКЛЮЧНІ СИТУАЦІЇ***: | Адміністратор не має доступу до редагування облікового запису ProfileEdit.AccessDenied<br />Обраного користувача не існує ProfileEdit.WrongLogin<br />Адміністратор не підтверджує редагування облікового запису Admin.ProfileEdit.NotConfirm |

```plantuml
@startuml
|Адміністратор|
    start
    :Вибирає обліковий запис\nдля редагування;
        note left #FF736E
            ProfileDelete.AccessDenied
            ProfileDelete.WrongLogin       
        end note

|Система|
    :Надає форму для\nредагування запису;
|Адміністратор|
    :Змінює інформацію в\nобліковому записі;
    :Натискає кнопку\nпідтвердження редагування;
        note left #FF736E
            Admin.ProfileDelete.NotConfirm        
        end note

|Система|
    :Перевіряє дані з форми;
        note right #FF736E
            ProfileEdit.WrongLogin
            ProfileEdit.WrongEmail
            ProfileEdit.WrongPass        
        end note

    :Зберігає змінену інформацію;

|Адміністратор|
    stop;
@enduml
```

#### Видалення облікового запису

| ***ID***:         | Admin.ProfileDelete                                                               |
|-------------------|-----------------------------------------------------------------------------------|
| ***НАЗВА***:      | Видалення облікового запису                           |
| ***УЧАСНИКИ***:   | Адміністратор, система                                                            |
| ***ПЕРЕДУМОВИ***: | Адміністратор виконав авторизацію, адміністратор має права для видалення профілю. |
| ***РЕЗУЛЬТАТ***:  | Обліковий запис видалений адміністратором                                         |
| ***ВИКЛЮЧНІ СИТУАЦІЇ***: | Адміністратор не авторизований <br />Адміністратор не має доступу до видалення облікового запису <br />Обраного користувача не існує <br />Адміністратор не підтверджує видалення облікового запису |
| ***ОСНОВНИЙ СЦЕНАРІЙ***: | 1. Адміністратор знаходить користувача, чий обліковий запис потрібно видалити. <br />2. Адміністратор натискає на кнопку "Видалити обліковий запис". <br />3. Система відкриває вікно з попередженням про видалення профілю. <br />4. Адміністратор натискає кнопку "Підтвердити" <br />5. Система видаляє профіль користувача з усіма даними <br />6. Система повідомляє адміністратору про успішне видалення профілю. |
